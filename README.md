# TheobjectRating
Rating calculation for theobject.ru

## Расчёт рейтинга стрелков
Рейтинг стрелков рассчитывается на основании данных об очках, полученных стрелками при участии в матчах.

## Методика расчета
Рейтинг стрелка (R) рассчитывается как сумма произведений баллов, присвоенных стрелку в результате участия в матче (r), и коэффициента затухания во времени (k).

Баллы за участие в матче рассчитываются по формуле:

r = Rsum × P / Psum, где

Rsum — сумма рейтингов стрелков, принявших участие в матче, на дату проведения матча;
P — количество очков, полученное стрелком за участие в матче;
Psum — сумма очков всем стрелков, принявших участие в матче.

Коэффициент затухания во времени рассчитывается по формуле:

k = exp(- 1 / 200×m ^ (0,6 + m/20)), где

m — количество месяцев между датами проведения матча и датой расчета рейтинга (условно - сегодня). Количество месяцев рассчитывается как частное разницы в днях и числа = (365×4 + 1) / (4×12).

Таким образом, общий рейтинг рассчитывается по формуле:

R = r1×k1 + r2×k2 + r3×k3 +  … + rn×kn, где

n — кол-во матчей, в которых стрелок принимал участие, а ri и ki —баллы, полученные стрелком за i-ый матч и соответствующий коэффициент затухания.

## Представление результатов расчета
Фактическим результатом расчета рейтинга является абсолютное число баллов. Однако, для удобства и в силу традиций абсолютные значения рейтинга переводятся в процентные значения. За 100% принимается максимальное количество баллов (у чемпиона), остальные значения высчитываются как доли в процентах от максимума:

Rпроценты = 100 × Rбаллы / Rбаллы(max)

Кроме рейтинга в процентах, в таблице фигурирует порядковый номер стрелка, его имя, количество проведенных матчей, изменение рейтинга с даты проведения последнего матча (не важно, принимал он участие или нет) и группа (определяется по рейтингу).

